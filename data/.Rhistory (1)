library(data.table)
library(ggplot2)
n_obs <- 500
dt1 <- data.table(pos = 1:10, avg = c(3, 4, 7.5, 6, 5, 4, 3, 2.5, 3.2, 3.5))
dt2 <- data.table(pos = sort(rep(dt1$pos, n_obs)), pop = unlist(lapply(dt1$avg, function(x) rnorm(n_obs, mean = x, sd = 1))))
dt2$pos_rand <- dt2$pos + rnorm(nrow(dt2), mean = 0, sd = 0.05)
ggplot(dt2, aes(x = pop, y = -pos_rand)) + geom_point(aes(color = factor(pos)))
setwd("~/Desktop/Projects/yt-captions/data/")
library(dplyr)
library(data.table)
library(readxl)
files <- lapply(list.files(pattern = ".csv"), read.csv)
vids <- lapply(files, function(dt) {
dt %>%
select(channelTitle, channelId, videoTitle, videoId, captionLang, captionType) %>%
return()
}) %>% rbindlist() %>% unique()
lang_cw <- read_excel("language-crosswalk.xlsx")
vids %>%
left_join(lang_cw, by = c("captionLang" = "code")) %>%
filter(is.na(language)) %>%
View()
vids %>% head()
vids %>% select(videoId) %>% unique() %>% nrow()
vids %>% group_by(videoId) %>% summarise(n = n_distinct(captionLang)
)
setwd("~/Desktop/Projects/yt-captions/data/")
library(dplyr)
library(data.table)
library(readxl)
files <- lapply(list.files(pattern = ".csv"), read.csv)
vids <- lapply(files, function(dt) {
dt %>%
select(channelTitle, channelId, videoTitle, videoId, captionLang, captionType) %>%
return()
}) %>% rbindlist() %>% unique()
lang_cw <- read_excel("language-crosswalk.xlsx")
vids %>%
left_join(lang_cw, by = c("captionLang" = "code")) %>%
filter(is.na(language)) %>%
View()
vids %>% group_by(videoId) %>% summarise(n = n_distinct(captionLang) %>% filter(n = 0)
)
vids %>% group_by(videoId) %>% summarise(n = n_distinct(captionLang)) %>% filter(n == 0)
vids %>% group_by(videoId) %>% summarise(n = n_distinct(captionLang, na.rm = T))
vids %>% group_by(videoId) %>% summarise(n = n_distinct(captionLang, na.rm = T)) %>% filter(n == 0)
vids %>%
left_join(lang_cw, by = c("captionLang" = "code")) %>%
filter(is.na(language)) %>%
View()
View(vids)
